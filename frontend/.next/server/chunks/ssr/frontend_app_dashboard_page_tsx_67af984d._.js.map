{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/OmniCare-AI/frontend/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { supabase } from \"@/lib/supabaseClient\";\nimport { LineChart, Line, XAxis, YAxis, Tooltip, ResponsiveContainer, BarChart, Bar } from \"recharts\";\n\n// Reusable KPI card component\nfunction KpiCard({ title, value, icon }: { title: string; value: number; icon: string }) {\n  return (\n    <div className=\"bg-black/40 backdrop-blur-md rounded-xl p-4 flex flex-col items-center w-40 shadow-lg\">\n      <div className=\"text-purple-400 text-3xl mb-2\">{icon}</div>\n      <div className=\"text-white font-semibold text-lg\">{title}</div>\n      <div className=\"text-white font-bold text-xl\">{value}</div>\n    </div>\n  );\n}\n\nexport default function Dashboard() {\n  const [customers, setCustomers] = useState(0);\n  const [openTickets, setOpenTickets] = useState(0);\n  const [revenue, setRevenue] = useState(0);\n  const [aiTasks, setAiTasks] = useState(0);\n  const [salesData, setSalesData] = useState<any[]>([]);\n  const [ticketsData, setTicketsData] = useState<any[]>([]);\n\n  // Fetch dashboard data from Supabase\n  useEffect(() => {\n    const fetchData = async () => {\n      // Customers count\n      const { count: customerCount } = await supabase\n        .from(\"customers\")\n        .select(\"*\", { count: \"exact\" });\n      setCustomers(customerCount || 0);\n\n      // Open tickets\n      const { count: ticketsCount } = await supabase\n        .from(\"tickets\")\n        .select(\"*\", { count: \"exact\" })\n        .eq(\"status\", \"open\");\n      setOpenTickets(ticketsCount || 0);\n\n      // Revenue\n      const { data: sales } = await supabase.from(\"sales\").select(\"amount\");\n      const totalRevenue = sales?.reduce((sum, s) => sum + s.amount, 0) || 0;\n      setRevenue(totalRevenue);\n\n      // AI tasks completed\n      const { count: tasksCount } = await supabase\n        .from(\"ai_tasks\")\n        .select(\"*\", { count: \"exact\" })\n        .eq(\"status\", \"completed\");\n      setAiTasks(tasksCount || 0);\n\n      // Prepare sales chart data (group by day)\n      const salesChartData = sales?.map((s: any, i: number) => ({\n        day: `Day ${i + 1}`,\n        amount: s.amount,\n      })) || [];\n      setSalesData(salesChartData);\n\n      // Prepare tickets chart data\n      const { data: tickets } = await supabase.from(\"tickets\").select(\"created_at\");\n      const ticketsChartData = tickets?.map((t: any, i: number) => ({\n        day: `Day ${i + 1}`,\n        tickets: 1, // count each ticket\n      })) || [];\n      setTicketsData(ticketsChartData);\n    };\n\n    fetchData();\n  }, []);\n\n  return (\n    <div className=\"p-6 pt-24 bg-gradient-to-br from-gray-900 via-purple-900 to-black min-h-screen text-white\">\n      {/* KPI Cards */}\n      <div className=\"flex gap-4 mb-8 flex-wrap\">\n        <KpiCard title=\"Customers\" value={customers} icon=\"ðŸ‘¥\" />\n        <KpiCard title=\"Open Tickets\" value={openTickets} icon=\"ðŸ“©\" />\n        <KpiCard title=\"Revenue\" value={revenue} icon=\"ðŸ’°\" />\n        <KpiCard title=\"AI Tasks Done\" value={aiTasks} icon=\"ðŸ¤–\" />\n      </div>\n\n      {/* Charts */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8\">\n        {/* Sales Chart */}\n        <div className=\"bg-black/40 backdrop-blur-md rounded-xl p-4 shadow-lg\">\n          <h2 className=\"text-purple-400 font-semibold mb-2\">Sales Trend</h2>\n          <ResponsiveContainer width=\"100%\" height={250}>\n            <LineChart data={salesData}>\n              <XAxis dataKey=\"day\" stroke=\"#ddd\" />\n              <YAxis stroke=\"#ddd\" />\n              <Tooltip />\n              <Line type=\"monotone\" dataKey=\"amount\" stroke=\"#9f7aea\" strokeWidth={2} />\n            </LineChart>\n          </ResponsiveContainer>\n        </div>\n\n        {/* Tickets Chart */}\n        <div className=\"bg-black/40 backdrop-blur-md rounded-xl p-4 shadow-lg\">\n          <h2 className=\"text-purple-400 font-semibold mb-2\">Tickets Trend</h2>\n          <ResponsiveContainer width=\"100%\" height={250}>\n            <BarChart data={ticketsData}>\n              <XAxis dataKey=\"day\" stroke=\"#ddd\" />\n              <YAxis stroke=\"#ddd\" />\n              <Tooltip />\n              <Bar dataKey=\"tickets\" fill=\"#9f7aea\" />\n            </BarChart>\n          </ResponsiveContainer>\n        </div>\n      </div>\n\n      {/* Quick Actions */}\n      <div className=\"bg-black/40 backdrop-blur-md rounded-xl p-4 shadow-lg mb-8\">\n        <h2 className=\"text-purple-400 font-semibold mb-2\">Quick Actions</h2>\n        <div className=\"flex gap-4 flex-wrap\">\n          <button className=\"bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-md transition\">\n            Auto-email Reply\n          </button>\n          <button className=\"bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-md transition\">\n            Schedule Social Post\n          </button>\n          <button className=\"bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-md transition\">\n            Assign Task\n          </button>\n        </div>\n      </div>\n\n      {/* Recent Activity Table */}\n      <div className=\"bg-black/40 backdrop-blur-md rounded-xl p-4 shadow-lg\">\n        <h2 className=\"text-purple-400 font-semibold mb-2\">Recent Activity</h2>\n        <table className=\"w-full text-left text-white\">\n          <thead>\n            <tr>\n              <th className=\"p-2\">Type</th>\n              <th className=\"p-2\">Details</th>\n              <th className=\"p-2\">Date</th>\n            </tr>\n          </thead>\n          <tbody>\n            {/* Example mapping, replace with real Supabase data */}\n            <tr>\n              <td className=\"p-2\">Ticket</td>\n              <td className=\"p-2\">Customer inquiry received</td>\n              <td className=\"p-2\">2025-08-29</td>\n            </tr>\n            <tr>\n              <td className=\"p-2\">AI Task</td>\n              <td className=\"p-2\">Auto-email sent</td>\n              <td className=\"p-2\">2025-08-29</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}