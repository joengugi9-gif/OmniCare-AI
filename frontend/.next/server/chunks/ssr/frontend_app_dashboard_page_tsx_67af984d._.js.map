{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/OmniCare-AI/frontend/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { supabase } from \"@/lib/supabaseClient\";\nimport { useRouter } from \"next/navigation\";\nimport Link from \"next/link\";\nimport { LineChart, Line, XAxis, YAxis, Tooltip, ResponsiveContainer } from \"recharts\";\n\nexport default function Dashboard() {\n  const router = useRouter();\n  const [user, setUser] = useState<any>(null);\n  const [kpis, setKpis] = useState({\n    customers: 0,\n    activeTickets: 0,\n    aiSuggestions: 0,\n    costSaved: 0,\n  });\n  const [aiList, setAiList] = useState([]);\n\n  useEffect(() => {\n    // Get logged-in user\n    supabase.auth.getSession().then(({ data }) => {\n      if (!data.session) router.push(\"/login\");\n      setUser(data.session?.user);\n    });\n\n    // Fetch KPIs from Supabase\n    async function fetchKPIs() {\n      const { data: customers } = await supabase.from(\"customers\").select(\"*\");\n      const { data: tickets } = await supabase.from(\"tickets\").select(\"*\").eq(\"status\", \"active\");\n      const { data: aiSuggestions } = await supabase.from(\"ai_suggestions\").select(\"*\").eq(\"status\", \"pending\");\n      const { data: costs } = await supabase.from(\"automation_costs\").select(\"*\");\n\n      setKpis({\n        customers: customers?.length || 0,\n        activeTickets: tickets?.length || 0,\n        aiSuggestions: aiSuggestions?.length || 0,\n        costSaved: costs?.reduce((sum, c) => sum + c.amount_saved, 0) || 0,\n      });\n\n      setAiList(aiSuggestions || []);\n    }\n\n    fetchKPIs();\n  }, []);\n\n  const implementSuggestion = async (id: string) => {\n    await supabase.from(\"ai_suggestions\").update({ status: \"implemented\" }).eq(\"id\", id);\n    setAiList(prev => prev.filter(s => s.id !== id));\n  };\n\n  const chartData = [\n    { name: \"Jan\", tickets: 20 },\n    { name: \"Feb\", tickets: 45 },\n    { name: \"Mar\", tickets: 30 },\n    { name: \"Apr\", tickets: 60 },\n    { name: \"May\", tickets: 50 },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-black via-gray-900 to-purple-900 text-white p-8 pt-32 font-sans\">\n      <h1 className=\"text-3xl font-bold mb-6\">Welcome, {user?.email.split(\"@\")[0]}</h1>\n\n      {/* KPI Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n        <div className=\"bg-black/60 p-6 rounded-lg shadow-md backdrop-blur-md\">\n          <h2 className=\"text-lg font-semibold\">Customers</h2>\n          <p className=\"text-2xl mt-2\">{kpis.customers}</p>\n        </div>\n        <div className=\"bg-black/60 p-6 rounded-lg shadow-md backdrop-blur-md\">\n          <h2 className=\"text-lg font-semibold\">Active Tickets</h2>\n          <p className=\"text-2xl mt-2\">{kpis.activeTickets}</p>\n        </div>\n        <div className=\"bg-black/60 p-6 rounded-lg shadow-md backdrop-blur-md\">\n          <h2 className=\"text-lg font-semibold\">AI Suggestions</h2>\n          <p className=\"text-2xl mt-2\">{kpis.aiSuggestions}</p>\n        </div>\n        <div className=\"bg-black/60 p-6 rounded-lg shadow-md backdrop-blur-md\">\n          <h2 className=\"text-lg font-semibold\">Cost Saved ($)</h2>\n          <p className=\"text-2xl mt-2\">{kpis.costSaved}</p>\n        </div>\n      </div>\n\n      {/* AI Suggestions Panel */}\n      <div className=\"mb-8\">\n        <h2 className=\"text-2xl font-bold mb-4\">AI Recommendations</h2>\n        <div className=\"space-y-4\">\n          {aiList.map((s: any) => (\n            <div key={s.id} className=\"bg-black/50 p-4 rounded-md flex justify-between items-center\">\n              <span>{s.title}</span>\n              <button\n                className=\"bg-purple-500 hover:bg-purple-600 text-white px-4 py-1 rounded-md\"\n                onClick={() => implementSuggestion(s.id)}\n              >\n                Implement\n              </button>\n            </div>\n          ))}\n          {aiList.length === 0 && <p className=\"text-gray-400\">No pending AI suggestions.</p>}\n        </div>\n      </div>\n\n      {/* Analytics Chart */}\n      <div className=\"bg-black/60 p-6 rounded-lg shadow-md backdrop-blur-md\">\n        <h2 className=\"text-2xl font-bold mb-4\">Tickets Over Time</h2>\n        <ResponsiveContainer width=\"100%\" height={250}>\n          <LineChart data={chartData}>\n            <XAxis dataKey=\"name\" stroke=\"#ccc\" />\n            <YAxis stroke=\"#ccc\" />\n            <Tooltip />\n            <Line type=\"monotone\" dataKey=\"tickets\" stroke=\"#a855f7\" strokeWidth={3} />\n          </LineChart>\n        </ResponsiveContainer>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}