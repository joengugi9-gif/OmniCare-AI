{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/OmniCare-AI/frontend/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { supabase } from \"@/lib/supabaseClient\";\nimport { LineChart, Line, XAxis, YAxis, Tooltip, ResponsiveContainer, BarChart, Bar } from \"recharts\";\n\n// Reusable KPI card component\nfunction KpiCard({ title, value, icon }: { title: string; value: number; icon: string }) {\n  return (\n    <div className=\"bg-black/40 backdrop-blur-md rounded-xl p-4 flex flex-col items-center w-40 shadow-lg\">\n      <div className=\"text-purple-400 text-3xl mb-2\">{icon}</div>\n      <div className=\"text-white font-semibold text-lg\">{title}</div>\n      <div className=\"text-white font-bold text-xl\">{value}</div>\n    </div>\n  );\n}\n\nexport default function Dashboard() {\n  const [customers, setCustomers] = useState(0);\n  const [openTickets, setOpenTickets] = useState(0);\n  const [revenue, setRevenue] = useState(0);\n  const [aiTasks, setAiTasks] = useState(0);\n  const [salesData, setSalesData] = useState<any[]>([]);\n  const [ticketsData, setTicketsData] = useState<any[]>([]);\n\n  // Fetch dashboard data from Supabase\n  useEffect(() => {\n    const fetchData = async () => {\n      // Customers count\n      const { count: customerCount } = await supabase\n        .from(\"customers\")\n        .select(\"*\", { count: \"exact\" });\n      setCustomers(customerCount || 0);\n\n      // Open tickets\n      const { count: ticketsCount } = await supabase\n        .from(\"tickets\")\n        .select(\"*\", { count: \"exact\" })\n        .eq(\"status\", \"open\");\n      setOpenTickets(ticketsCount || 0);\n\n      // Revenue\n      const { data: sales } = await supabase.from(\"sales\").select(\"amount\");\n      const totalRevenue = sales?.reduce((sum, s) => sum + s.amount, 0) || 0;\n      setRevenue(totalRevenue);\n\n      // AI tasks completed\n      const { count: tasksCount } = await supabase\n        .from(\"ai_tasks\")\n        .select(\"*\", { count: \"exact\" })\n        .eq(\"status\", \"completed\");\n      setAiTasks(tasksCount || 0);\n\n      // Prepare sales chart data (group by day)\n      const salesChartData = sales?.map((s: any, i: number) => ({\n        day: `Day ${i + 1}`,\n        amount: s.amount,\n      })) || [];\n      setSalesData(salesChartData);\n\n      // Prepare tickets chart data\n      const { data: tickets } = await supabase.from(\"tickets\").select(\"created_at\");\n      const ticketsChartData = tickets?.map((t: any, i: number) => ({\n        day: `Day ${i + 1}`,\n        tickets: 1, // count each ticket\n      })) || [];\n      setTicketsData(ticketsChartData);\n    };\n\n    fetchData();\n  }, []);\n\n  return (\n    <div className=\"p-6 pt-24 bg-gradient-to-br from-gray-900 via-purple-900 to-black min-h-screen text-white\">\n      {/* KPI Cards */}\n      <div className=\"flex gap-4 mb-8 flex-wrap\">\n        <KpiCard title=\"Customers\" value={customers} icon=\"ðŸ‘¥\" />\n        <KpiCard title=\"Open Tickets\" value={openTickets} icon=\"ðŸ“©\" />\n        <KpiCard title=\"Revenue\" value={revenue} icon=\"ðŸ’°\" />\n        <KpiCard title=\"AI Tasks Done\" value={aiTasks} icon=\"ðŸ¤–\" />\n      </div>\n\n      {/* Charts */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8\">\n        {/* Sales Chart */}\n        <div className=\"bg-black/40 backdrop-blur-md rounded-xl p-4 shadow-lg\">\n          <h2 className=\"text-purple-400 font-semibold mb-2\">Sales Trend</h2>\n          <ResponsiveContainer width=\"100%\" height={250}>\n            <LineChart data={salesData}>\n              <XAxis dataKey=\"day\" stroke=\"#ddd\" />\n              <YAxis stroke=\"#ddd\" />\n              <Tooltip />\n              <Line type=\"monotone\" dataKey=\"amount\" stroke=\"#9f7aea\" strokeWidth={2} />\n            </LineChart>\n          </ResponsiveContainer>\n        </div>\n\n        {/* Tickets Chart */}\n        <div className=\"bg-black/40 backdrop-blur-md rounded-xl p-4 shadow-lg\">\n          <h2 className=\"text-purple-400 font-semibold mb-2\">Tickets Trend</h2>\n          <ResponsiveContainer width=\"100%\" height={250}>\n            <BarChart data={ticketsData}>\n              <XAxis dataKey=\"day\" stroke=\"#ddd\" />\n              <YAxis stroke=\"#ddd\" />\n              <Tooltip />\n              <Bar dataKey=\"tickets\" fill=\"#9f7aea\" />\n            </BarChart>\n          </ResponsiveContainer>\n        </div>\n      </div>\n\n      {/* Quick Actions */}\n      <div className=\"bg-black/40 backdrop-blur-md rounded-xl p-4 shadow-lg mb-8\">\n        <h2 className=\"text-purple-400 font-semibold mb-2\">Quick Actions</h2>\n        <div className=\"flex gap-4 flex-wrap\">\n          <button className=\"bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-md transition\">\n            Auto-email Reply\n          </button>\n          <button className=\"bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-md transition\">\n            Schedule Social Post\n          </button>\n          <button className=\"bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-md transition\">\n            Assign Task\n          </button>\n        </div>\n      </div>\n\n      {/* Recent Activity Table */}\n      <div className=\"bg-black/40 backdrop-blur-md rounded-xl p-4 shadow-lg\">\n        <h2 className=\"text-purple-400 font-semibold mb-2\">Recent Activity</h2>\n        <table className=\"w-full text-left text-white\">\n          <thead>\n            <tr>\n              <th className=\"p-2\">Type</th>\n              <th className=\"p-2\">Details</th>\n              <th className=\"p-2\">Date</th>\n            </tr>\n          </thead>\n          <tbody>\n            {/* Example mapping, replace with real Supabase data */}\n            <tr>\n              <td className=\"p-2\">Ticket</td>\n              <td className=\"p-2\">Customer inquiry received</td>\n              <td className=\"p-2\">2025-08-29</td>\n            </tr>\n            <tr>\n              <td className=\"p-2\">AI Task</td>\n              <td className=\"p-2\">Auto-email sent</td>\n              <td className=\"p-2\">2025-08-29</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}