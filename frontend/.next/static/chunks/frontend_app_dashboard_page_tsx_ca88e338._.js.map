{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/OmniCare-AI/frontend/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { supabase } from \"@/lib/supabaseClient\";\nimport { useRouter } from \"next/navigation\";\nimport Link from \"next/link\";\nimport { LineChart, Line, XAxis, YAxis, Tooltip, ResponsiveContainer } from \"recharts\";\n\nexport default function Dashboard() {\n  const router = useRouter();\n  const [user, setUser] = useState<any>(null);\n  const [kpis, setKpis] = useState({\n    customers: 0,\n    activeTickets: 0,\n    aiSuggestions: 0,\n    costSaved: 0,\n  });\n  const [aiList, setAiList] = useState([]);\n\n  useEffect(() => {\n    // Get logged-in user\n    supabase.auth.getSession().then(({ data }) => {\n      if (!data.session) router.push(\"/login\");\n      setUser(data.session?.user);\n    });\n\n    // Fetch KPIs from Supabase\n    async function fetchKPIs() {\n      const { data: customers } = await supabase.from(\"customers\").select(\"*\");\n      const { data: tickets } = await supabase.from(\"tickets\").select(\"*\").eq(\"status\", \"active\");\n      const { data: aiSuggestions } = await supabase.from(\"ai_suggestions\").select(\"*\").eq(\"status\", \"pending\");\n      const { data: costs } = await supabase.from(\"automation_costs\").select(\"*\");\n\n      setKpis({\n        customers: customers?.length || 0,\n        activeTickets: tickets?.length || 0,\n        aiSuggestions: aiSuggestions?.length || 0,\n        costSaved: costs?.reduce((sum, c) => sum + c.amount_saved, 0) || 0,\n      });\n\n      setAiList(aiSuggestions || []);\n    }\n\n    fetchKPIs();\n  }, []);\n\n  const implementSuggestion = async (id: string) => {\n    await supabase.from(\"ai_suggestions\").update({ status: \"implemented\" }).eq(\"id\", id);\n    setAiList(prev => prev.filter(s => s.id !== id));\n  };\n\n  const chartData = [\n    { name: \"Jan\", tickets: 20 },\n    { name: \"Feb\", tickets: 45 },\n    { name: \"Mar\", tickets: 30 },\n    { name: \"Apr\", tickets: 60 },\n    { name: \"May\", tickets: 50 },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-black via-gray-900 to-purple-900 text-white p-8 pt-32 font-sans\">\n      <h1 className=\"text-3xl font-bold mb-6\">Welcome, {user?.email.split(\"@\")[0]}</h1>\n\n      {/* KPI Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n        <div className=\"bg-black/60 p-6 rounded-lg shadow-md backdrop-blur-md\">\n          <h2 className=\"text-lg font-semibold\">Customers</h2>\n          <p className=\"text-2xl mt-2\">{kpis.customers}</p>\n        </div>\n        <div className=\"bg-black/60 p-6 rounded-lg shadow-md backdrop-blur-md\">\n          <h2 className=\"text-lg font-semibold\">Active Tickets</h2>\n          <p className=\"text-2xl mt-2\">{kpis.activeTickets}</p>\n        </div>\n        <div className=\"bg-black/60 p-6 rounded-lg shadow-md backdrop-blur-md\">\n          <h2 className=\"text-lg font-semibold\">AI Suggestions</h2>\n          <p className=\"text-2xl mt-2\">{kpis.aiSuggestions}</p>\n        </div>\n        <div className=\"bg-black/60 p-6 rounded-lg shadow-md backdrop-blur-md\">\n          <h2 className=\"text-lg font-semibold\">Cost Saved ($)</h2>\n          <p className=\"text-2xl mt-2\">{kpis.costSaved}</p>\n        </div>\n      </div>\n\n      {/* AI Suggestions Panel */}\n      <div className=\"mb-8\">\n        <h2 className=\"text-2xl font-bold mb-4\">AI Recommendations</h2>\n        <div className=\"space-y-4\">\n          {aiList.map((s: any) => (\n            <div key={s.id} className=\"bg-black/50 p-4 rounded-md flex justify-between items-center\">\n              <span>{s.title}</span>\n              <button\n                className=\"bg-purple-500 hover:bg-purple-600 text-white px-4 py-1 rounded-md\"\n                onClick={() => implementSuggestion(s.id)}\n              >\n                Implement\n              </button>\n            </div>\n          ))}\n          {aiList.length === 0 && <p className=\"text-gray-400\">No pending AI suggestions.</p>}\n        </div>\n      </div>\n\n      {/* Analytics Chart */}\n      <div className=\"bg-black/60 p-6 rounded-lg shadow-md backdrop-blur-md\">\n        <h2 className=\"text-2xl font-bold mb-4\">Tickets Over Time</h2>\n        <ResponsiveContainer width=\"100%\" height={250}>\n          <LineChart data={chartData}>\n            <XAxis dataKey=\"name\" stroke=\"#ccc\" />\n            <YAxis stroke=\"#ccc\" />\n            <Tooltip />\n            <Line type=\"monotone\" dataKey=\"tickets\" stroke=\"#a855f7\" strokeWidth={3} />\n          </LineChart>\n        </ResponsiveContainer>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}